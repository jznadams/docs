<!DOCTYPE html><!-- sort the comments by name--><html lang="en" ng-app="padd"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"><title>respoke.DirectConnection - respoke.min.js Client Libary</title><meta name="keywords" content=""><meta name="keywords" content=""><link rel="shortcut icon" type="image/ico" href="https://www.respoke.io/favicon.ico"><link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700|Source+Code+Pro"><link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css"><link type="text/css" rel="stylesheet" href="https://www.respoke.io/min/production.css"><link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/docco.min.css"><link type="text/css" rel="stylesheet" href="/css/site.css"><script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.13/angular.min.js"></script><script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script><script src="/js/padd.js"></script></head><body data-spy="scroll" data-target=".secondary-nav"><div id="wrap"><div class="public-site"><div ng-controller="NavController" class="topbar-wrapper opaque"><div bfind-class-foo="@isexcited" class="navigation"><div onclick="$(this).next().find('ul.nav-items').toggle()" class="nav-menu-button"><ul><li></li><li></li><li></li></ul></div><div class="nav-container"><a href="" class="www-link"><img src="https://www.respoke.io/images/logo_respoke.png" class="logo"></a><ul ng-show="menuVisibility !== false" class="nav-items"><li><a href="/#howitworks" class="www-link">How it works</a></li><li><a href="/#pricing" class="www-link">Pricing</a></li><li><a href="/">Docs</a></li><li><a href="http://community.respoke.io">Community</a></li><li><a href="/#login" class="visible-xs log-in">log in</a></li><li><a href="javascript:void(0)" onclick="logout()" class="visible-xs log-out">log out</a></li><li><a href="/#sign-up-form" class="visible-xs sign-up">Sign Up</a></li><li><a href="" class="visible-xs portal">PORTAL</a></li></ul><div ng-show="menuVisibility !== false" class="buttons"><a href="/#login" class="log-in www-link">log in</a><a href="javascript:void(0)" onclick="logout()" class="log-out">log out</a><a href="/#sign-up-form" class="sign-up www-link">Sign Up</a><a href="" class="portal">PORTAL</a></div></div></div></div><!-- Main Page Content--><region><div ng-controller="NavController" class="how-it-works"><div class="how-it-works-container"><div id="content"><div class="row"><div class="col-md-2">
<div id="main-sidebar-wrap">
  <ul id="main-sidebar" class="nav affix">
    <li>Getting Started
      <ul>
        <li ng-class="{ active: currentPage == '/' }"><a href="/">Quickstart</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/brokered-auth.html') }"><a href="/tutorials/brokered-auth.html">Authentication</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/calling-to-and-from-a-phone.html') }"><a href="/tutorials/calling-to-and-from-a-phone.html">Calling to and from a Phone</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/connecting-with-asterisk.html') }"><a href="/tutorials/connecting-with-asterisk.html">Connecting with Asterisk</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/direct-connection.html') }"><a href="/tutorials/direct-connection.html">Direct Connections</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/example-apps.html') }"><a href="/tutorials/example-apps.html">Example Apps</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/roles-and-permissions.html') }"><a href="/tutorials/roles-and-permissions.html">Roles &amp; Permissions</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/video-chat.html') }"><a href="/tutorials/video-chat.html">Video Chat</a></li>
      </ul>
    </li>
    <li>Reference
      <ul>
        <li ng-class="{ active: currentPage === ('/reference/changelog.html') }"><a href="/reference/changelog.html">Changelog</a></li>
        <li ng-class="{ active: currentPage === ('/reference/libraries.html') }"><a href="/reference/libraries.html">Libraries</a></li>
        <li ng-class="{ active: currentPage === ('/reference/respoke-js-logs.html') }"><a href="/reference/respoke-js-logs.html">Respoke.js Logs</a></li>
        <li ng-class="{ active: currentPage === ('/reference/rest-api.html') }"><a href="/reference/rest-api.html">REST API Routes</a></li>
      </ul>
    </li>
    <li>FAQs
      <ul>
        <li ng-class="{ active: currentPage === ('/faqs/general.html') }"><a href="/faqs/general.html">General</a></li>
        <li ng-class="{ active: currentPage === ('/faqs/pstn.html') }"><a href="/faqs/pstn.html">PSTN</a></li>
      </ul>
    </li>
    <li>JS Library
      <ul>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.html') }"><a href="/js-library/respoke.html">respoke</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Call.html') }"><a href="/js-library/respoke.Call.html">Call</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Client.html') }"><a href="/js-library/respoke.Client.html">Client</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Connection.html') }"><a href="/js-library/respoke.Connection.html">Connection</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.DirectConnection.html') }"><a href="/js-library/respoke.DirectConnection.html">DirectConnection</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Endpoint.html') }"><a href="/js-library/respoke.Endpoint.html">Endpoint</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.EventEmitter.html') }"><a href="/js-library/respoke.EventEmitter.html">EventEmitter</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Group.html') }"><a href="/js-library/respoke.Group.html">Group</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.LocalMedia.html') }"><a href="/js-library/respoke.LocalMedia.html">LocalMedia</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.MediaStats.html') }"><a href="/js-library/respoke.MediaStats.html">MediaStats</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Presentable.html') }"><a href="/js-library/respoke.Presentable.html">Presentable</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.RemoteMedia.html') }"><a href="/js-library/respoke.RemoteMedia.html">RemoteMedia</a></li>
      </ul>
    </li>
  </ul>
</div></div><div class="col-md-7"><div class="content-wrap"><button id="sidebar-toggle-button" onclick="$('#main-sidebar').toggle();$(this).find('i.glyphicon').toggleClass('hide');" class="btn btn xl btn-primary"><i class="glyphicon glyphicon-th-list"></i><i class="glyphicon glyphicon-remove hide"></i></button><h1 class="center">respoke.DirectConnection</h1><div class="visible-xs visible-sm"><br><br><h2 class="visible-xs">respoke.DirectConnection</h2><div data-stellar-ratio="0.02" class="secondary-nav affix"><ul class="nav"><li>Properties & Methods</li><li class="active"><a href="#respoke-DirectConnection">Overview</a></li><li><a href="#accept">accept</a></li><li><a href="#close">close</a></li><li><a href="#getStats">getStats</a></li><li><a href="#id">id</a></li><li><a href="#isActive">isActive</a></li><li><a href="#reject">reject</a></li><li><a href="#sendMessage">sendMessage</a></li><li>&nbsp;</li><li>Events<li><a href="#respoke-DirectConnection-close">close</a></li><li><a href="#respoke-DirectConnection-error">error</a></li><li><a href="#respoke-DirectConnection-message">message</a></li><li><a href="#respoke-DirectConnection-open">open</a></li><li><a href="#respoke-DirectConnection-start">start</a></li><li><a href="#respoke-DirectConnection-stats">stats</a></li></li></ul></div></div><div id="respoke-DirectConnection" class="ctx top-margin-mlady"><h1 class="left">Overview</h1><p><strong>extends&nbsp;<a href="/js-library/respoke.EventEmitter.html"><code>respoke.EventEmitter</code></a></strong></p><div><p>A direct connection via RTCDataChannel, including state and path negotation.</p>
</div></div><div id="accept" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#accept"><span class="bold"> accept(params)</span></a></h1><p><strong>fires </strong><code>accept</code></p><div><p>Start the process of obtaining media. saveParameters will only be meaningful for the callee,
since the library calls this method for the caller. Developers will use this method to pass in
callbacks for the callee.</p>
</div><h3>Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>params</code></div><div class="col-sm-3"><strong>object</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onOpen</code></div><div class="col-sm-3"><strong>respoke.DirectConnection.onOpen</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onClose</code></div><div class="col-sm-3"><strong>respoke.DirectConnection.onClose</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onMessage</code></div><div class="col-sm-3"><strong>respoke.DirectConnection.onMessage</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onStart</code></div><div class="col-sm-3"><strong>respoke.DirectConnection.onStart</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"></div><div id="close" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#close"><span class="bold"> close()</span></a></h1><p><strong>fires </strong><code>close</code></p><div><p>Tear down the connection.</p>
</div></div><div id="getStats" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#getStats"><span class="bold"> getStats(params)</span></a></h1><p><strong>returns <code>Promise&lt;object&gt;|undefined</code></strong></p><div><p>Return media stats. Since we have to wait for both the answer and offer to be available before starting
statistics, we&#39;ll return a promise for the stats object.
<strong>Using callbacks</strong> by passing <code>params.onSuccess</code> or <code>params.onError</code> will disable promises.</p>
</div><h3>Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>params</code></div><div class="col-sm-3"><strong>object</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.interval=5000</code></div><div class="col-sm-3"><strong>number</strong></div><div class="col-sm-5">How often in milliseconds to fetch statistics.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onStats</code></div><div class="col-sm-3"><strong>respoke.MediaStatsParser.statsHandler</strong></div><div class="col-sm-5">An optional callback to receive the
stats if the Respoke stats module is loaded. If no callback is provided, the connection's report will
contain stats but the developer will not receive them on the client-side.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onSuccess</code></div><div class="col-sm-3"><strong>respoke.DirectConnection.statsSuccessHandler</strong></div><div class="col-sm-5">Success handler for this
invocation of this method only.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onError</code></div><div class="col-sm-3"><strong>respoke.DirectConnection.errorHandler</strong></div><div class="col-sm-5">Error handler for this invocation of
this method only.</div></div><br class="visible-xs"></div><div id="id" class="ctx top-margin-mlady"><h1 class="left monospace"><code>string</code><a href="#id" class="bold"> id</a></h1><div><p>The unique identifier of the direct connection.</p>
</div></div><div id="isActive" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#isActive"><span class="bold"> isActive()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Indicate whether a datachannel is being setup or is in progress.</p>
</div></div><div id="reject" class="ctx top-margin-mlady"><h1 class="left monospace"><code></code><a href="#reject" class="bold"> reject</a></h1><div><p>Expose close as reject for approve/reject workflow.</p>
</div><h3>Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>signal</code></div><div class="col-sm-3"><strong>boolean</strong></div><div class="col-sm-5">Optional flag to indicate whether to send or suppress sending
a hangup signal to the remote side.</div></div><br class="visible-xs"></div><div id="sendMessage" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#sendMessage"><span class="bold"> sendMessage(params)</span></a></h1><p><strong>returns <code>Promise|undefined</code></strong></p><div><p>Send a message over the datachannel in the form of a JSON-encoded plain old JavaScript object. Only one
attribute may be given: either a string &#39;message&#39; or an object &#39;object&#39;.
<strong>Using callbacks</strong> by passing <code>params.onSuccess</code> or <code>params.onError</code> will disable promises.</p>
</div><h3>Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>params</code></div><div class="col-sm-3"><strong>object</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.message</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">The message to send.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.object</code></div><div class="col-sm-3"><strong>object</strong></div><div class="col-sm-5">An object to send.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onSuccess</code></div><div class="col-sm-3"><strong>respoke.DirectConnection.sendHandler</strong></div><div class="col-sm-5">Success handler for this invocation
of this method only.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onError</code></div><div class="col-sm-3"><strong>respoke.DirectConnection.errorHandler</strong></div><div class="col-sm-5">Error handler for this invocation
of this method only.</div></div><br class="visible-xs"></div><h1 class="top-margin-mlady">Events</h1><p>Listen for events on an instance of this class.</p><div id="respoke-DirectConnection-close" class="ctx top-margin-mlady"><h1 class="left monospace"><code>event</code> <a href="#respoke.DirectConnection-close" class="bold">close</a></h1><div><p>The direct connection is closed.</p>
</div><pre><code>directconnection.listen('close', function (evt) {
    // handle event
});</code></pre><h3>Callback Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>evt.name</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>evt.target</code></div><div class="col-sm-3"><strong>respoke.DirectConnection</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"></div><div id="respoke-DirectConnection-error" class="ctx top-margin-mlady"><h1 class="left monospace"><code>event</code> <a href="#respoke.DirectConnection-error" class="bold">error</a></h1><div><p>An error occurred while setting up the direct connection.</p>
</div><pre><code>directconnection.listen('error', function (evt) {
    // handle event
});</code></pre><h3>Callback Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>evt.reason</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">A human-readable description of the error.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>evt.name</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>evt.target</code></div><div class="col-sm-3"><strong>respoke.DirectConnection</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"></div><div id="respoke-DirectConnection-message" class="ctx top-margin-mlady"><h1 class="left monospace"><code>event</code> <a href="#respoke.DirectConnection-message" class="bold">message</a></h1><div><p>Incoming message on this direct connection.</p>
</div><pre><code>directconnection.listen('message', function (evt) {
    // handle event
});</code></pre><h3>Callback Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>evt.message</code></div><div class="col-sm-3"><strong>respoke.TextMessage</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>evt.endpoint</code></div><div class="col-sm-3"><strong>respoke.Endpoint</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>evt.name</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>evt.target</code></div><div class="col-sm-3"><strong>respoke.DirectConnection</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"></div><div id="respoke-DirectConnection-open" class="ctx top-margin-mlady"><h1 class="left monospace"><code>event</code> <a href="#respoke.DirectConnection-open" class="bold">open</a></h1><div><p>The direct connection is open.</p>
</div><pre><code>directconnection.listen('open', function (evt) {
    // handle event
});</code></pre><h3>Callback Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>evt.name</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>evt.target</code></div><div class="col-sm-3"><strong>respoke.DirectConnection</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"></div><div id="respoke-DirectConnection-start" class="ctx top-margin-mlady"><h1 class="left monospace"><code>event</code> <a href="#respoke.DirectConnection-start" class="bold">start</a></h1><div><p>The direct connection setup has begun. This does NOT mean it&#39;s ready to send messages yet. Listen to
DirectConnection#open for that notification.</p>
</div><pre><code>directconnection.listen('start', function (evt) {
    // handle event
});</code></pre><h3>Callback Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>evt.name</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>evt.target</code></div><div class="col-sm-3"><strong>respoke.DirectConnection</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"></div><div id="respoke-DirectConnection-stats" class="ctx top-margin-mlady"><h1 class="left monospace"><code>event</code> <a href="#respoke.DirectConnection-stats" class="bold">stats</a></h1><div><p>This event is fired every time statistical information about the direct connection
becomes available.</p>
</div><pre><code>directconnection.listen('stats', function (evt) {
    // handle event
});</code></pre><h3>Callback Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>evt.stats</code></div><div class="col-sm-3"><strong>object</strong></div><div class="col-sm-5">an object with stats in it.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>evt.target</code></div><div class="col-sm-3"><strong>respoke.DirectConnection</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>evt.name</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"></div><br><br><br><br></div></div><div class="col-md-3"><div class="hidden-xs hidden-sm"><h2 class="visible-xs">respoke.DirectConnection</h2><div data-stellar-ratio="0.02" class="secondary-nav affix"><ul class="nav"><li>Properties & Methods</li><li class="active"><a href="#respoke-DirectConnection">Overview</a></li><li><a href="#accept">accept</a></li><li><a href="#close">close</a></li><li><a href="#getStats">getStats</a></li><li><a href="#id">id</a></li><li><a href="#isActive">isActive</a></li><li><a href="#reject">reject</a></li><li><a href="#sendMessage">sendMessage</a></li><li>&nbsp;</li><li>Events<li><a href="#respoke-DirectConnection-close">close</a></li><li><a href="#respoke-DirectConnection-error">error</a></li><li><a href="#respoke-DirectConnection-message">message</a></li><li><a href="#respoke-DirectConnection-open">open</a></li><li><a href="#respoke-DirectConnection-start">start</a></li><li><a href="#respoke-DirectConnection-stats">stats</a></li></li></ul></div></div></div></div></div></div></div></region></div><!-- Footer--><region><footer><div class="content-wrap"><section class="copy"><div class="footer"><div class="footer-container"><div class="footer-links"><a href="http://digium.com/respoke"><img src="/images/digium_white.png" class="digium-logo"></a></div><div class="footer-content"><p class="copy">Copyright &copy; 2014 D.C.S, LLC</p><p class="copy"><a href="mailto:info@respoke.io">info@respoke.io</a></p></div><div class="footer-links social-links"><a href="https://twitter.com/respoke"><span class="fa fa-twitter"></span></a><a href="https://www.facebook.com/respokeIO"><span class="fa fa-facebook"></span></a><a href="https://plus.google.com/110089434291590810767" rel="publisher"><span class="fa fa-google-plus"></span></a></div></div></div></section></div></footer></region></div></body></html><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/stellar.js/0.6.2/jquery.stellar.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script><script>// Scrollspy
// TODO: use angular-ui boostrap version instead
$('body').scrollspy({ target: '.secondary-nav', offset: 150 });

// parallax by http://markdalgleish.com/projects/stellar.js/
$.stellar();

// affixing the sidebar at high resolutions
var resizeEvent = function(event){
  if($(window).width() > 990) {
      affixLeftSidebar();
  }
};
window.addEventListener('resize', resizeEvent);
resizeEvent();

// Showing and login and signup
(function () {
    var token = $.cookie('token');
    var $login = $('.log-in');
    var $logout = $('.log-out');
    var $signup = $('.sign-up');
    var $portal = $('.portal');
    var $wwwlink = $('.www-link');
    var $logo = $('img.logo');
    
    function loggedIn() {
        $login.remove();
        $signup.remove();
        
        $portal.css('display', 'inline-block');
        $logout.css('display', 'inline-block');
    }
    function notLoggedIn() {
        $portal.remove();
        $logout.remove();
        
        //- $login.css('display', 'inline-block');
        //- $signup.css('display', 'inline-block');
    }
    
    var apiBase = window.location.host.replace('docs', 'api').replace(':2003', ':2000');
    var apiUrl = apiBase.indexOf('testing.digiumlabs.com') !== -1 ? 'http://' : 'https://';
    apiUrl += apiBase + '/v1/admins/me';
    var publicBase = window.location.host.replace('docs', 'www').replace(':2003', ':2001');
    var publicUrl = publicBase.indexOf('testing.digiumlabs.com') !== -1 ? 'http://' : 'https://';
    publicUrl += publicBase;
    var portalBase = window.location.host.replace('docs', 'portal').replace(':2003', ':2002');
    var portalUrl = portalBase.indexOf('testing.digiumlabs.com') !== -1 ? 'http://' : 'https://';
    portalUrl += portalBase;
    
    if (token) {
        $.ajax({
            url: apiUrl,
            type: 'GET',
            headers: {
                'Admin-Token': token
            },
            success: loggedIn,
            error: notLoggedIn
        });
    }
    else {
        notLoggedIn();
    }
    
    $portal.attr('href', portalUrl + $portal.attr('href'));
    $wwwlink.each(function () {
        $(this).attr('href', publicUrl + $(this).attr('href'))
    });
    $logo.attr('src', publicUrl + $logo.attr('src').replace('https://www.respoke.io',''));
})();

function logout() {
    $.removeCookie('token', { domain: '.' + window.location.hostname.split('.').slice(-2).join('.') });
    window.location.reload();
}

$.ajax({
      url: '//d3px1qgagsf6ei.cloudfront.net/Scripts/f772acdb-7c45-430c-8c5a-28c3bcbb420e',
      crossDomain: true,
      dataType: 'script',
      success: function () {
          Payboard.Events.trackPage;
      },
      error: function () {
          console.log("There was an error retrieving the payboard tracking script");
      }
});
</script>