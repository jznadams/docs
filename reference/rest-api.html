<h1 id="respoke-rest-api">Respoke REST API</h1>
<p>All REST routes require the header <code>Content-Type: application/json</code>.</p>
<p><br /></p>
<h1 id="base-url">Base URL</h1>
<p><code>https://api.respoke.io/v1</code></p>
<p><br /></p>
<h1 id="authentication-methods">Authentication Methods</h1>
<p>There are <strong>three ways to authenticate</strong> to Respoke. Each provides a different level of permissions.</p>
<p><br /></p>
<h2 id="full-admin-auth-partial-admin-auth-app-token-auth">Full Admin Auth &gt; Partial Admin Auth &gt; App Token Auth</h2>
<p><br /></p>
<h3 id="1-full-admin-auth">1. Full Admin Auth</h3>
<p>Full API permissions are obtained by <code>POST</code>ing your username and password to <code>[base]/adminsessions</code>.</p>
<h3 id="2-partial-admin-auth">2. Partial Admin Auth</h3>
<p>By using the <code>App-Secret</code> header, you can perform API calls to obtain Respoke sessions for your users via <code>POST</code> to <code>[base]/tokens</code>.</p>
<p><code>App-Secret</code>s are found in the <a href="https://portal.respoke.io/#apps">Dev Console</a>.</p>
<h3 id="3-app-token-auth">3. App Token Auth</h3>
<p>Your users authenticate to Respoke using an <code>App-Token</code> obtained when they <code>POST</code> your <code>tokenId</code> to <code>[base]/appauthsessions</code>.</p>
<p><br />
<br /></p>
<h1 id="api-routes">API Routes</h1>
<p><br /></p>
<h2 id="post-base-admin-sessions">POST [base]/admin-sessions</h2>
<p>Log in with the account username and password. Get an <code>Admin-Token</code>.</p>
<h5 id="header">Header</h5>
<p>none</p>
<h5 id="body">Body</h5>
<pre><code>{
    &quot;username&quot;: &quot;ada@respoke.io&quot;,
    &quot;password&quot;: &quot;c0unte55love1@ce&quot;
}
</code></pre><h5 id="response">Response</h5>
<pre><code>{
    &quot;message&quot;: &quot;Authorization successful&quot;,
    &quot;token&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;
}
</code></pre><p><br /></p>
<h2 id="post-base-apps">POST [base]/apps</h2>
<p>Create an app.</p>
<h5 id="header">Header</h5>
<p><code>Admin-Token: XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</code></p>
<h5 id="body">Body</h5>
<pre><code>{
    &quot;name&quot;: &quot;My Example App Name&quot;,
    &quot;description&quot;: &quot;Testing and making things rock.&quot;
}
</code></pre><h5 id="response">Response</h5>
<pre><code>{
    &quot;name&quot;: &quot;My Example App Name&quot;,
    &quot;description&quot;: &quot;Testing and making things rock.&quot;,
    &quot;accountId&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;,
    &quot;locked&quot;: false,
    &quot;developmentMode&quot;: false,
    &quot;id&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;,
    &quot;secret&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;,
    &quot;createdAt&quot;: &quot;2014-04-23T18:25:43.511Z&quot;,
    &quot;updatedAt&quot;: &quot;2014-04-23T18:25:43.511Z&quot;
}
</code></pre><p><br /></p>
<h2 id="post-base-roles">POST [base]/roles</h2>
<p>Create <code>roleId</code> and <code>roleName</code> for creating tokens.</p>
<h5 id="header">Header</h5>
<p><code>App-Secret: XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</code></p>
<h5 id="body">Body</h5>
<p><em>Example, equivalent to development mode role:</em></p>
<pre><code>{
    &quot;appId&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;,
    &quot;name&quot;:&quot;your-role-name-here&quot;,
    &quot;mediaRelay&quot;: false,
    &quot;events&quot;: {
        &quot;subscribe&quot;: false,
        &quot;unsubscribe&quot;: false,
    },
    &quot;groups&quot;: {
        &quot;list&quot;: true,
        &quot;*&quot;: {
            &quot;subscribe&quot;: true,
            &quot;unsubscribe&quot;: true,
            &quot;create&quot;: true,
            &quot;destroy&quot;: true,
            &quot;publish&quot;: true,
            &quot;getsubscribers&quot;: true
        }
    }
}
</code></pre><h5 id="response">Response</h5>
<pre><code>{
    &quot;appId&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;,
    &quot;name&quot;: &quot;your-role-name-here&quot;, // This is the roleName for creating tokens.
    &quot;id&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;, // This is the roleId for creating tokens.
    &quot;mediaRelay&quot;: false,
    &quot;events&quot;: {
        &quot;subscribe&quot;: false,
        &quot;unsubscribe&quot;: false,
    },
    &quot;groups&quot;: {
        &quot;list&quot;: true,
        &quot;*&quot;: {
            &quot;subscribe&quot;: true,
            &quot;unsubscribe&quot;: true,
            &quot;create&quot;: true,
            &quot;destroy&quot;: true,
            &quot;publish&quot;: true,
            &quot;getsubscribers&quot;: true
        }
    },
    &quot;createdAt&quot;: &quot;2014-04-23T18:25:43.511Z&quot;,
    &quot;updatedAt&quot;: &quot;2014-04-23T18:25:43.511Z&quot;
}
</code></pre><p><br /></p>
<h2 id="post-base-tokens">POST [base]/tokens</h2>
<p>Get an access token <code>tokenId</code> for an end-user.</p>
<h5 id="header">Header</h5>
<p><code>App-Secret: XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</code></p>
<h5 id="body">Body</h5>
<pre><code>{
    &quot;appId&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;,
    &quot;endpointId&quot;: &quot;yourendpointwithnospaces&quot;,
    /* response token will expire in this many seconds */
    &quot;ttl&quot;: &quot;86400&quot;,
    /* from POST permissions response &quot;id&quot; (optional if roleName is provided) */
    &quot;roleId&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;,
    /* optional if roleId is provided */
    &quot;roleName&quot;: &quot;your role name&quot;
}
</code></pre><h5 id="response">Response</h5>
<pre><code>{
    &quot;appId&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;,
    &quot;endpointId&quot;: &quot;yourendpointwithnospaces&quot;,
    &quot;roleId&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;,
    &quot;createTime&quot;: 1404315468,
    &quot;expiryTime&quot;: 1404315468,
    &quot;id&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;,
    &quot;tokenId&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;
}
</code></pre><p><br /></p>
<h2 id="post-base-session-tokens">POST [base]/session-tokens</h2>
<p>An end-user client posts a <code>tokenId</code> from <code>POST [base]/tokens</code> to authenticate to an app as <code>endpointId</code>.</p>
<h5 id="header">Header</h5>
<p><code>App-Token: XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</code></p>
<h5 id="body">Body</h5>
<pre><code>{
    &quot;tokenId&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;
}
</code></pre><h5 id="response">Response</h5>
<pre><code>{
    &quot;message&quot;: &quot;Authorization successful&quot;,
    &quot;token&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;
}
</code></pre><p><br /></p>
<h2 id="post-base-turn">POST [base]/turn</h2>
<p>Get TURN credentials.</p>
<h5 id="header">Header</h5>
<p><code>App-Token: XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</code></p>
<h5 id="body">Body</h5>
<p>none</p>
<h5 id="response">Response</h5>
<pre><code>{
    &quot;username&quot;: &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXXXXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX.0000000000&quot;,
    &quot;password&quot;: &quot;XXXXXXXXXXXX+XXXXXXXXXXXXXX=&quot;,
    &quot;ttl&quot;: 60,
    &quot;uris&quot;: [
        &quot;turn:54.193.20.11:3478?transport=udp&quot;
    ]
}
</code></pre>