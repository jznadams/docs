<!DOCTYPE html><!-- sort the comments by name--><html lang="en" ng-app="padd"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"><title>respoke - respoke.min.js Client Libary</title><meta name="keywords" content=""><meta name="keywords" content=""><link rel="shortcut icon" type="image/ico" href="https://www.respoke.io/favicon.ico"><link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700|Source+Code+Pro"><link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css"><link type="text/css" rel="stylesheet" href="https://www.respoke.io/min/production.css"><link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/docco.min.css"><link type="text/css" rel="stylesheet" href="/css/site.css"><script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.13/angular.min.js"></script><script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script><script src="/js/padd.js"></script></head><body data-spy="scroll" data-target=".secondary-nav"><div id="wrap"><div class="public-site"><div ng-controller="NavController" class="topbar-wrapper opaque"><div bfind-class-foo="@isexcited" class="navigation"><div onclick="$(this).next().find('ul.nav-items').toggle()" class="nav-menu-button"><ul><li></li><li></li><li></li></ul></div><div class="nav-container"><a href="" class="www-link"><img src="https://www.respoke.io/images/logo_respoke.png" class="logo"></a><ul ng-show="menuVisibility !== false" class="nav-items"><li><a href="/#howitworks" class="www-link">How it works</a></li><li><a href="/#pricing" class="www-link">Pricing</a></li><li><a href="/">Docs</a></li><li><a href="http://community.respoke.io">Community</a></li><li><a href="/#login" class="visible-xs log-in">log in</a></li><li><a href="javascript:void(0)" onclick="logout()" class="visible-xs log-out">log out</a></li><li><a href="/#sign-up-form" class="visible-xs sign-up">Sign Up</a></li><li><a href="" class="visible-xs portal">PORTAL</a></li></ul><div ng-show="menuVisibility !== false" class="buttons"><a href="/#login" class="log-in www-link">log in</a><a href="javascript:void(0)" onclick="logout()" class="log-out">log out</a><a href="/#sign-up-form" class="sign-up www-link">Sign Up</a><a href="" class="portal">PORTAL</a></div></div></div></div><!-- Main Page Content--><region><div ng-controller="NavController" class="how-it-works"><div class="how-it-works-container"><div id="content"><div class="row"><div class="col-md-2">
<div id="main-sidebar-wrap">
  <ul id="main-sidebar" class="nav affix">
    <li>Getting Started
      <ul>
        <li ng-class="{ active: currentPage == '/' }"><a href="/">Quickstart</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/brokered-auth.html') }"><a href="/tutorials/brokered-auth.html">Authentication</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/calling-to-and-from-a-phone.html') }"><a href="/tutorials/calling-to-and-from-a-phone.html">Calling to and from a Phone</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/connecting-with-asterisk.html') }"><a href="/tutorials/connecting-with-asterisk.html">Connecting with Asterisk</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/direct-connection.html') }"><a href="/tutorials/direct-connection.html">Direct Connections</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/example-apps.html') }"><a href="/tutorials/example-apps.html">Example Apps</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/roles-and-permissions.html') }"><a href="/tutorials/roles-and-permissions.html">Roles &amp; Permissions</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/video-chat.html') }"><a href="/tutorials/video-chat.html">Video Chat</a></li>
      </ul>
    </li>
    <li>Reference
      <ul>
        <li ng-class="{ active: currentPage === ('/reference/changelog.html') }"><a href="/reference/changelog.html">Changelog</a></li>
        <li ng-class="{ active: currentPage === ('/reference/libraries.html') }"><a href="/reference/libraries.html">Libraries</a></li>
        <li ng-class="{ active: currentPage === ('/reference/respoke-js-logs.html') }"><a href="/reference/respoke-js-logs.html">Respoke.js Logs</a></li>
        <li ng-class="{ active: currentPage === ('/reference/rest-api.html') }"><a href="/reference/rest-api.html">REST API Routes</a></li>
      </ul>
    </li>
    <li>FAQs
      <ul>
        <li ng-class="{ active: currentPage === ('/faqs/general.html') }"><a href="/faqs/general.html">General</a></li>
        <li ng-class="{ active: currentPage === ('/faqs/pstn.html') }"><a href="/faqs/pstn.html">PSTN</a></li>
      </ul>
    </li>
    <li>JS Library
      <ul>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.html') }"><a href="/js-library/respoke.html">respoke</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Call.html') }"><a href="/js-library/respoke.Call.html">Call</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Client.html') }"><a href="/js-library/respoke.Client.html">Client</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Connection.html') }"><a href="/js-library/respoke.Connection.html">Connection</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.DirectConnection.html') }"><a href="/js-library/respoke.DirectConnection.html">DirectConnection</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Endpoint.html') }"><a href="/js-library/respoke.Endpoint.html">Endpoint</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.EventEmitter.html') }"><a href="/js-library/respoke.EventEmitter.html">EventEmitter</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Group.html') }"><a href="/js-library/respoke.Group.html">Group</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.LocalMedia.html') }"><a href="/js-library/respoke.LocalMedia.html">LocalMedia</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.MediaStats.html') }"><a href="/js-library/respoke.MediaStats.html">MediaStats</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Presentable.html') }"><a href="/js-library/respoke.Presentable.html">Presentable</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.RemoteMedia.html') }"><a href="/js-library/respoke.RemoteMedia.html">RemoteMedia</a></li>
      </ul>
    </li>
  </ul>
</div></div><div class="col-md-7"><div class="content-wrap"><button id="sidebar-toggle-button" onclick="$('#main-sidebar').toggle();$(this).find('i.glyphicon').toggleClass('hide');" class="btn btn xl btn-primary"><i class="glyphicon glyphicon-th-list"></i><i class="glyphicon glyphicon-remove hide"></i></button><h1 class="center">respoke</h1><p>To use this library, include:</p><pre><code>&lt;script src=&quot;https://cdn.respoke.io/respoke.min.js&quot;&gt;&lt;/script&gt;</code></pre><div class="visible-xs visible-sm"><br><br><h2 class="visible-xs">respoke</h2><div data-stellar-ratio="0.02" class="secondary-nav affix"><ul class="nav"><li>Properties & Methods</li><li class="active"><a href="#respoke">Overview</a></li><li><a href="#connect">connect</a></li><li><a href="#constraintsHasAudio">constraintsHasAudio</a></li><li><a href="#constraintsHasVideo">constraintsHasVideo</a></li><li><a href="#createClient">createClient</a></li><li><a href="#getClient">getClient</a></li><li><a href="#hasRTCPeerConnection">hasRTCPeerConnection</a></li><li><a href="#hasUserMedia">hasUserMedia</a></li><li><a href="#hasWebsocket">hasWebsocket</a></li><li><a href="#sdpHasAudio">sdpHasAudio</a></li><li><a href="#sdpHasDataChannel">sdpHasDataChannel</a></li><li><a href="#sdpHasVideo">sdpHasVideo</a></li><li><a href="#version">version</a></li><li>&nbsp;</li></ul></div></div><div id="respoke" class="ctx top-margin-mlady"><h1 class="left">Overview</h1><div><p><code>respoke</code> is a global static class.</p>
<p>Include the <a href="https://cdn.respoke.io/respoke.min.js">latest version</a> or 
<a href="http://cdn.respoke.io/list.html">choose a previous release</a>.</p>
<p>Interact with Respoke primarily via <a href="respoke.Client.html"><code>respoke.Client</code></a>:</p>
<pre><code> var client = respoke.createClient();
</code></pre><p><strong>Development mode without brokered auth</strong></p>
<pre><code> var client = respoke.createClient({
     appId: &quot;XXXXXXX-my-app-id-XXXXXX&quot;,
     developmentMode: true,
     endpointId: &quot;billy&quot;
 });

 client.listen(&#39;connect&#39;, function () {
     console.log(&#39;connected to respoke!&#39;);
 });

 client.listen(&#39;error&#39;, function (err) {
     console.error(&#39;Connection to Respoke failed.&#39;, err);
 });

 client.connect();
</code></pre><p><strong>Production mode with brokered auth</strong></p>
<pre><code> var client = respoke.createClient();

 client.listen(&#39;connect&#39;, function () {
     console.log(&#39;connected to respoke!&#39;);
 });

 client.listen(&#39;error&#39;, function (err) {
     console.error(&#39;Connection to Respoke failed.&#39;, err);
 });

 // Respoke auth token obtained by your server. 
 // This is how you control who can connect to Respoke app.
 // See API docs for POST [base]/tokens
 var tokenId = &quot;XXXX-XXXX-brokered-auth-token-XXXXX&quot;;

 // connect to respoke with the token
 client.connect({
     reconnect: false,
     token: tokenId
 });

 // fetch a new token from your server if it expires
 client.listen(&#39;disconnect&#39;, function (evt) {
     // fetch another token from your server.
     var newTokenId = &quot;XXXX-XXXX-brokered-auth-token2-XXXXX&quot;;
     client.connect({
         reconnect: false,
         token: newTokenId
     });
 });
</code></pre><h3 id="event-listeners-vs-callback-handlers">Event listeners vs callback handlers</h3>
<p>There are two ways to attach listeners. It is highly recommended that you choose one pattern 
and stick to it throughout your app.</p>
<p>For every <code>event-name</code>, there is a corresponding callback <code>onEventName</code>.</p>
<p><strong>With a listener</strong></p>
<pre><code> var client = respoke.createClient();
 client.listen(&#39;connect&#39;, function () { });
</code></pre><p><strong>or with a callback</strong></p>
<pre><code> var client = respoke.createClient({
     // other options go here

     onConnect: function () { }
 });
</code></pre></div></div><div id="connect" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#connect"><span class="bold"> connect(params)</span></a></h1><p><strong>returns <code>respoke.Client</code></strong></p><div><p>This is one of two possible entry points for interating with the library. </p>
<p>This method creates a new Client object
which represents your user&#39;s connection to your Respoke app. </p>
<p>This method <strong>automatically calls client.connect(params)</strong> after the client is created.</p>
</div><h3>Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>params</code></div><div class="col-sm-3"><strong>object</strong></div><div class="col-sm-5">Parameters to the respoke.Client constructor.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.appId</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.baseURL</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.token</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.constraints</code></div><div class="col-sm-3"><strong>RTCConstraints</strong></div><div class="col-sm-5">A set of default WebRTC call constraints if you wish to use
different parameters than the built-in defaults.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.servers</code></div><div class="col-sm-3"><strong>RTCICEServers</strong></div><div class="col-sm-5">A set of default WebRTC ICE/STUN/TURN servers if you wish to use
different parameters than the built-in defaults.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.presence</code></div><div class="col-sm-3"><strong>string, number, object, Array</strong></div><div class="col-sm-5">The initial presence to set once connected.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.developmentMode=false</code></div><div class="col-sm-3"><strong>boolean</strong></div><div class="col-sm-5">Indication to obtain an authentication token from the service.
Note: Your app must be in developer mode to use this feature. This is not intended as a long-term mode of
operation and will limit the services you will be able to use.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.reconnect=true</code></div><div class="col-sm-3"><strong>boolean</strong></div><div class="col-sm-5">Whether or not to automatically reconnect to the Respoke service
when a disconnect occurs.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onSuccess</code></div><div class="col-sm-3"><strong>function</strong></div><div class="col-sm-5">Success handler for this invocation of this method only.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onError</code></div><div class="col-sm-3"><strong>function</strong></div><div class="col-sm-5">Error handler for this invocation of this method only.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onJoin</code></div><div class="col-sm-3"><strong>function</strong></div><div class="col-sm-5">Callback for when this client's endpoint joins a group.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onLeave</code></div><div class="col-sm-3"><strong>function</strong></div><div class="col-sm-5">Callback for when this client's endpoint leaves a group.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onMessage</code></div><div class="col-sm-3"><strong>function</strong></div><div class="col-sm-5">Callback for when any message is received from anywhere on the system.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onDisconnect</code></div><div class="col-sm-3"><strong>function</strong></div><div class="col-sm-5">Callback for Client disconnect.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onReconnect</code></div><div class="col-sm-3"><strong>function</strong></div><div class="col-sm-5">Callback for Client reconnect. Not Implemented.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onCall</code></div><div class="col-sm-3"><strong>function</strong></div><div class="col-sm-5">Callback for when this client's user receives a call.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onDirectConnection</code></div><div class="col-sm-3"><strong>function</strong></div><div class="col-sm-5">Callback for when this client's user receives a request for a
direct connection.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.enableCallDebugReport=true</code></div><div class="col-sm-3"><strong>boolean</strong></div><div class="col-sm-5">Optional flag defaulting to true which allows sending
debugging information.</div></div><br class="visible-xs"></div><div id="constraintsHasAudio" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#constraintsHasAudio"><span class="bold"> constraintsHasAudio()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Does the sdp indicate an audio stream?</p>
</div></div><div id="constraintsHasVideo" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#constraintsHasVideo"><span class="bold"> constraintsHasVideo()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Does the constraints indicate a video stream?</p>
</div></div><div id="createClient" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#createClient"><span class="bold"> createClient(params)</span></a></h1><p><strong>returns <code>respoke.Client</code></strong></p><div><p>This is one of two possible entry points for interating with the library. </p>
<p>This method creates a new Client object which represents your user&#39;s connection to your Respoke app.</p>
<p>It <strong>does NOT automatically call the client.connect() method</strong> after the client is created. </p>
<p>The <code>params</code> argument is the same as <code>respoke.connect(params)</code>.</p>
</div><h3>Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>params</code></div><div class="col-sm-3"><strong>object</strong></div><div class="col-sm-5">Parameters to respoke.Client same as respoke.connect()</div></div><br class="visible-xs"></div><div id="getClient" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#getClient"><span class="bold"> getClient(id)</span></a></h1><p><strong>returns <code>respoke.Client</code></strong></p><div><p>Getter for the respoke client.</p>
<p>You can have more than one active client, so this method provides a way to retrieve a specific instance. </p>
</div><h3>Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>id</code></div><div class="col-sm-3"><strong>number</strong></div><div class="col-sm-5">The Client ID.</div></div><br class="visible-xs"></div><div id="hasRTCPeerConnection" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#hasRTCPeerConnection"><span class="bold"> hasRTCPeerConnection()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Does the browser support <code>RTCPeerConnection</code>?</p>
</div></div><div id="hasUserMedia" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#hasUserMedia"><span class="bold"> hasUserMedia()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Does the browser support <code>UserMedia</code>?</p>
</div></div><div id="hasWebsocket" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#hasWebsocket"><span class="bold"> hasWebsocket()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Does the browser support <code>WebSocket</code>?</p>
</div></div><div id="sdpHasAudio" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#sdpHasAudio"><span class="bold"> sdpHasAudio()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Does the sdp indicate an audio stream?</p>
</div></div><div id="sdpHasDataChannel" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#sdpHasDataChannel"><span class="bold"> sdpHasDataChannel()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Does the sdp indicate a data channel?</p>
</div></div><div id="sdpHasVideo" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#sdpHasVideo"><span class="bold"> sdpHasVideo()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Does the sdp indicate a video stream?</p>
</div></div><div id="version" class="ctx top-margin-mlady"><h1 class="left monospace"><code>string</code><a href="#version" class="bold"> version</a></h1><div><p><code>&quot;v0.0.0&quot;</code></p>
<p>The respoke.min.js version.</p>
<p>Past versions can be found at <a href="http://cdn.respoke.io/list.html">cdn.respoke.io/list.html</a></p>
</div></div><br><br><br><br></div></div><div class="col-md-3"><div class="hidden-xs hidden-sm"><h2 class="visible-xs">respoke</h2><div data-stellar-ratio="0.02" class="secondary-nav affix"><ul class="nav"><li>Properties & Methods</li><li class="active"><a href="#respoke">Overview</a></li><li><a href="#connect">connect</a></li><li><a href="#constraintsHasAudio">constraintsHasAudio</a></li><li><a href="#constraintsHasVideo">constraintsHasVideo</a></li><li><a href="#createClient">createClient</a></li><li><a href="#getClient">getClient</a></li><li><a href="#hasRTCPeerConnection">hasRTCPeerConnection</a></li><li><a href="#hasUserMedia">hasUserMedia</a></li><li><a href="#hasWebsocket">hasWebsocket</a></li><li><a href="#sdpHasAudio">sdpHasAudio</a></li><li><a href="#sdpHasDataChannel">sdpHasDataChannel</a></li><li><a href="#sdpHasVideo">sdpHasVideo</a></li><li><a href="#version">version</a></li><li>&nbsp;</li></ul></div></div></div></div></div></div></div></region></div><!-- Footer--><region><footer><div class="content-wrap"><section class="copy"><div class="footer"><div class="footer-container"><div class="footer-links"><a href="http://digium.com/respoke"><img src="/images/digium_white.png" class="digium-logo"></a></div><div class="footer-content"><p class="copy">Copyright &copy; 2014 D.C.S, LLC</p><p class="copy"><a href="mailto:info@respoke.io">info@respoke.io</a></p></div><div class="footer-links social-links"><a href="https://twitter.com/respoke"><span class="fa fa-twitter"></span></a><a href="https://www.facebook.com/respokeIO"><span class="fa fa-facebook"></span></a><a href="https://plus.google.com/110089434291590810767" rel="publisher"><span class="fa fa-google-plus"></span></a></div></div></div></section></div></footer></region></div></body></html><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/stellar.js/0.6.2/jquery.stellar.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script><script>// Scrollspy
// TODO: use angular-ui boostrap version instead
$('body').scrollspy({ target: '.secondary-nav', offset: 150 });

// parallax by http://markdalgleish.com/projects/stellar.js/
$.stellar();

// affixing the sidebar at high resolutions
var resizeEvent = function(event){
  if($(window).width() > 990) {
      affixLeftSidebar();
  }
};
window.addEventListener('resize', resizeEvent);
resizeEvent();

// Showing and login and signup
(function () {
    var token = $.cookie('token');
    var $login = $('.log-in');
    var $logout = $('.log-out');
    var $signup = $('.sign-up');
    var $portal = $('.portal');
    var $wwwlink = $('.www-link');
    var $logo = $('img.logo');
    
    function loggedIn() {
        $login.remove();
        $signup.remove();
        
        $portal.css('display', 'inline-block');
        $logout.css('display', 'inline-block');
    }
    function notLoggedIn() {
        $portal.remove();
        $logout.remove();
        
        //- $login.css('display', 'inline-block');
        //- $signup.css('display', 'inline-block');
    }
    
    var apiBase = window.location.host.replace('docs', 'api').replace(':2003', ':2000');
    var apiUrl = apiBase.indexOf('testing.digiumlabs.com') !== -1 ? 'http://' : 'https://';
    apiUrl += apiBase + '/v1/admins/me';
    var publicBase = window.location.host.replace('docs', 'www').replace(':2003', ':2001');
    var publicUrl = publicBase.indexOf('testing.digiumlabs.com') !== -1 ? 'http://' : 'https://';
    publicUrl += publicBase;
    var portalBase = window.location.host.replace('docs', 'portal').replace(':2003', ':2002');
    var portalUrl = portalBase.indexOf('testing.digiumlabs.com') !== -1 ? 'http://' : 'https://';
    portalUrl += portalBase;
    
    if (token) {
        $.ajax({
            url: apiUrl,
            type: 'GET',
            headers: {
                'Admin-Token': token
            },
            success: loggedIn,
            error: notLoggedIn
        });
    }
    else {
        notLoggedIn();
    }
    
    $portal.attr('href', portalUrl + $portal.attr('href'));
    $wwwlink.each(function () {
        $(this).attr('href', publicUrl + $(this).attr('href'))
    });
    $logo.attr('src', publicUrl + $logo.attr('src').replace('https://www.respoke.io',''));
})();

function logout() {
    $.removeCookie('token', { domain: '.' + window.location.hostname.split('.').slice(-2).join('.') });
    window.location.reload();
}

$.ajax({
      url: '//d3px1qgagsf6ei.cloudfront.net/Scripts/f772acdb-7c45-430c-8c5a-28c3bcbb420e',
      crossDomain: true,
      dataType: 'script',
      success: function () {
          Payboard.Events.trackPage;
      },
      error: function () {
          console.log("There was an error retrieving the payboard tracking script");
      }
});
</script>